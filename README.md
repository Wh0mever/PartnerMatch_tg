# Партнёрский Центр Организаций - Telegram Bot

Телеграм-бот для автоматизации поиска партнёров между организациями с системой верификации, лайков и матчей (как "знакомства между компаниями").

## Особенности

- Регистрация организаций с полной анкетой
- Регистрация наставников
- Система верификации через администраторов
- Поиск партнёров по критериям совпадения (лайки/матчи)
- Автоматическое уведомление о матчах
- Админ-панель для модерации
- Логирование всех действий
- Защита от нежелательных типов бизнеса

## Технологии

- Python 3.10+
- Aiogram 3.13.1 (асинхронный фреймворк для Telegram Bot API)
- aiosqlite 0.20.0 (асинхронный SQLite)
- SQLite3 (легковесная база данных)
- AsyncIO

## Структура проекта

```
PartnerMatch_tg/
├── bot/
│   ├── handlers/          # Обработчики команд и сообщений
│   ├── keyboards/         # Клавиатуры бота
│   ├── states/            # FSM состояния
│   ├── utils/             # Утилиты
│   ├── middlewares/       # Middleware
│   └── main.py            # Точка входа
├── database/
│   ├── database.py        # Подключение к БД и SQL схемы
│   └── crud.py            # CRUD операции
├── config/
│   └── config.py          # Конфигурация
├── .env                   # Переменные окружения
├── requirements.txt       # Зависимости
└── README.md

## Установка

### 1. Клонируйте репозиторий

```bash
git clone <repository_url>
cd PartnerMatch_tg
```

### 2. Создайте виртуальное окружение

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 3. Установите зависимости

```bash
pip install -r requirements.txt
```

### 4. Настройте переменные окружения

Отредактируйте файл `.env`:

```env
BOT_TOKEN=your_bot_token_here
OWNER_ID=your_telegram_id_here
DATABASE_URL=sqlite+aiosqlite:///./bot.db
```

**Важно:**
- `BOT_TOKEN` - токен вашего бота от @BotFather
- `OWNER_ID` - ваш Telegram ID (можно узнать через @userinfobot)

### 5. Запустите бота

```bash
python bot/main.py
```

## Использование

### Для пользователей

1. Отправьте `/start` боту
2. Выберите тип регистрации:
   - Организация - для поиска партнёров
   - Наставник - для помощи другим участникам
3. Заполните анкету
4. Дождитесь верификации администратором
5. Начните поиск партнёров через кнопку "Найти партнёра"

### Для администраторов

1. Установите роль `admin` или `owner` в базе данных для вашего пользователя
2. Используйте админ-панель для:
   - Проверки заявок на регистрацию
   - Одобрения/отклонения организаций
   - Просмотра статистики

## Основные функции

### Регистрация организации

Включает:
- Название и юридическая форма
- ИНН и контактные данные
- Описание деятельности
- Обороты компании
- Что может дать партнёру
- Что нужно от партнёра
- Формат взаимодействия (очно/дистанционно)
- Тип партнёрства (постоянное/разовое)
- Согласие на обработку персональных данных

### Поиск партнёров

Система показывает организации:
- С совпадающими критериями (что дают / что нужно)
- С подходящими оборотами
- Прошедшие верификацию

### Матчи

Когда две организации ставят друг другу лайк:
- Создаётся матч
- Обе стороны получают контакты друг друга
- Открывается возможность для дальнейшего общения

## Блокировки

Автоматически блокируются следующие типы бизнеса:
- Игорный бизнес
- Алкогольный бизнес
- Табачный бизнес
- Деятельность, противоречащая законодательству РФ

## База данных

Основные таблицы:
- `users` - пользователи
- `organizations` - организации
- `verifications` - верификации
- `likes` - лайки
- `matches` - матчи
- `mentors` - наставники
- `logs` - логи действий

## Разработка

### Добавление новых хендлеров

1. Создайте файл в `bot/handlers/`
2. Определите роутер: `router = Router()`
3. Добавьте обработчики с декораторами
4. Зарегистрируйте роутер в `bot/main.py`

### Добавление новых моделей

1. Определите модель в `database/models.py`
2. Импортируйте в `database/__init__.py`
3. База данных обновится автоматически при запуске

## Безопасность

- Все персональные данные хранятся локально
- Используется ФЗ-152 согласие на обработку данных
- Логирование всех действий пользователей
- Защита от нежелательных типов бизнеса

## Логи

Логи сохраняются в:
- Консоль (stdout)
- Файл `bot.log`
- База данных (таблица `logs`)

## Лицензия

MIT License

## Поддержка

При возникновении вопросов создайте Issue в репозитории.
